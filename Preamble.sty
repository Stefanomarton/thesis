\ProvidesPackage{Preamble}
\usepackage{mathtools}
\usepackage{parskip}
\usepackage{unicode-math}
\usepackage[utf8]{inputenc}
\usepackage[
	% style=nejm,
	maxcitenames=1,
	uniquelist=false,
	autocite=inline,
	backend=biber,
	isbn=false,
	url=false,
	giveninits=true,
	style=numeric,
	sorting=none,
	usetranslator=false,
	date=year,
	punctfont=true,
	dashed=false,
]{biblatex}

% Suppress unwanted fields, need recompilation but destroy everything
\DeclareSourcemap{
	\maps{
		\map{
			\step[fieldset=month, null]
			\step[fieldset=address, null]
			\step[fieldset=location, null]
			\step[fieldset=url, null]
			\step[fieldset=isbn, null]
			\step[fieldset=number, null]
			\step[fieldset=note, null]
		}
	}
}

% add bib resources
\addbibresource{Bibliography.bib}

% remove "In:" before article
\renewbibmacro{in:}{}

% change delimiter after title
\DeclareDelimFormat[bib]{nametitledelim}{%
	\adddot\space}

% removing pp. before pages
\DeclareFieldFormat[article]{pages}{#1}

% punct after autor
\renewcommand\labelnamepunct{\adddot\comma}

% Remove DOI: prefix
% \DeclareFieldFormat{doi}{%
% 	\ifhyperref
% 	{\href{https://doi.org/#1}{\nolinkurl{#1}}}
% 	{\nolinkurl{#1}}}

% add comma after journal title.
\DeclareFieldFormat{journaltitle}{\mkbibemph{#1}\isdot}
\renewbibmacro*{journal+issuetitle}{%
	\usebibmacro{journal}%
	\setunit*{\adddot\space}%
	\iffieldundef{series}
	{}
	{\newunit
		\printfield{series}%
		\setunit{\addspace}}%
	\usebibmacro{volume+number+eid}%
	\setunit{\addspace}%
	\usebibmacro{issue+date}%
	\setunit{\addcolon\space}%
	\usebibmacro{issue}%
	\newunit}

% remove parethesis of year
\renewbibmacro*{issue+date}{%
	\setunit{\addcomma\space}% NEW
	%  \printtext[parens]{% DELETED
	\iffieldundef{issue}
	{\usebibmacro{date}}
	{\printfield{issue}%
		\setunit*{\addspace}%
		%       \usebibmacro{date}}}% DELETED
		\usebibmacro{date}}% NEW
	\newunit}

\AtEveryBibitem{%
	% \clearfield{volume}%
	\clearfield{number}}
}

% make year bold
\DeclareFieldFormat{date}{\bfseries{#1}}

% make volume italic
\DeclareFieldFormat[article,periodical]{volume}{\mkbibitalic{#1}}

% swap year before volume
\renewbibmacro*{journal+issuetitle}{%
	\usebibmacro{journal}%
	\setunit*{\addspace}%
	\iffieldundef{series}
	{}
	{\newunit
		\printfield{series}%
		\setunit{\addspace}}%
	\setunit{\addspace}%
	\usebibmacro{issue+date}%
	\setunit{\addcolon\space}%
	\usebibmacro{issue}%
	\setunit{\addcomma\space}%
	\usebibmacro{volume+number+eid}%
	\newunit}

\usepackage{tabularx} % extra features for tabular environment
\usepackage{multirow}
\usepackage{amsmath}  % improve math presentation
\usepackage{dirtree}
\usepackage{graphicx} % takes care of graphic including machinery
\usepackage{multicol}
\usepackage{array}
\usepackage{booktabs}
\usepackage{pdfpages}
\usepackage{mathastext} % make textrm standard for math eq.
\usepackage[version=4]{mhchem}
\usepackage[margin=2.5cm]{geometry} % decreases margin
\usepackage[final]{hyperref} % adds hyper links inside the generated pdf file
\usepackage{subfiles}
\usepackage{etoolbox}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage[english]{babel}
\pagestyle{fancy}
\usepackage{microtype}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{bigstrut}
\usepackage{float}
\usepackage{chemfig}
\usepackage{chemmacros}
\usepackage{tocloft}
\usepackage{todonotes}
\usepackage{listings}
\lstset{basicstyle=\ttfamily}
\usepackage{xcolor}
\usepackage[withpage]{acronym}
\usepackage{mwe} %Required to have smaller caption
\usepackage{pdflscape}
\usepackage{lipsum}
\usepackage{booktabs}


\lstdefinestyle{mystyle}{
	language=Python,
	basicstyle=\ttfamily,
	keywordstyle=\color{blue},
	commentstyle=\color{red},
	numbers=left,
	numberstyle=\tiny\color{gray},
	frame=single,
	breaklines=true,
	tabsize=2,
	captionpos=b,
}
% \usepackage{epstopdf}
% \epstopdfsetup{outdir=Structures/}
%\chemsetup[chemformula]{format=\sffamily}
\renewcommand*\printatom[1]{\ensuremath{\mathsf{#1}}}
% \setatomsep{2em}
% \setdoublesep{.6ex}
% \setbondstyle{semithick}
\definecolor{myblue}{HTML}{3366CC}
\hypersetup{
	colorlinks=true,       % false: boxed links; true: colored links
	linkcolor=myblue,        % color of internal links
	citecolor=myblue,        % color of links to bibliography
	filecolor=myblue,     % color of file links
	urlcolor=myblue
}

\titleformat{\chapter}
{\normalfont\huge\bfseries}{\thechapter}{1em}{}
%
%  \titlespacing*{\chapter}{0pt}{0pt}{20pt}

\setlength{\cftbeforetoctitleskip}{-2em}
\lhead{}


% add subsubsubsection
% \setcounter{secnumdepth}{3}
\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}


% package and command for newpage
\usepackage{afterpage}

\newcommand\blankpage{%
	\null
	\thispagestyle{empty}%
	\addtocounter{page}{-1}%
	\newpage}

\usepackage{minted}
